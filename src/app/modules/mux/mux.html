<div class="mux-wrapper">
  <h1>Welcome to <span class="highlight">Transcoder</span></h1>

  <!-- Status Boxes -->
  <div class="status-boxes">
    <div class="box up">
      <p class="number">
        <i class="fa-solid fa-arrow-up"></i> {{ upCount }}
      </p>
      <p>UP</p>
    </div>
    <div class="box down">
      <p class="number">
        <i class="fa-solid fa-arrow-down"></i> {{ downCount }}
      </p>
      <p>DOWN</p>
    </div>
    <div class="box progress">
      <p class="number">
        <i class="fa-solid fa-spinner"></i> {{ progressCount }}
      </p>
      <p>PROGRESS</p>
    </div>
    <div class="box error">
      <p class="number">
        <i class="fa-solid fa-circle-exclamation"></i> {{ errorCount }}
      </p>
      <p>ERROR</p>
    </div>
  </div>

  <!-- Search + Action Buttons -->
  <div class="top-bar">
    <input
      type="text"
      placeholder="Search"
      [(ngModel)]="searchTerm"
      (input)="applyFilter()"
      class="search-box"
    />

    <div class="actions">
      <button class="btn start">Start</button>
      <button class="btn stop">Stop</button>
      <button class="btn add" (click)="openAddForm()">+ Add</button> <!-- ✅ Button click -->
      <button class="btn export">Export</button>
    </div>
  </div>

  <!-- Table -->
  <table class="mux-table">
    <thead>
      <tr>
        <th>S.NO</th>
        <th>Service Name</th>
        <th>LCN</th>
        <th>Input IP</th>
        <th>Input Port</th>
        <th>Preset</th>
        <th>Status</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let feed of filteredFeeds; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ feed.serviceName }}</td>
        <td>{{ feed.lcn }}</td>
        <td>{{ feed.inputIp }}</td>
        <td>{{ feed.inputPort }}</td>
        <td>{{ feed.preset }}</td>
        <td>
          <span class="status-dot" [ngClass]="feed.status"></span>
        </td>
        <td><i class="fa fa-pencil edit-icon" (click)="onEdit(feed)"></i></td>
        <td><i class="fa fa-times delete-icon" (click)="onDelete(feed)"></i></td>
      </tr>
    </tbody>
  </table>

  <!-- ✅ Add Mux Modal Component -->
  <app-add-mux
    *ngIf="showAddForm"
    (close)="closeAddForm()"
    (submitForm)="addMuxFeed($event)"
  ></app-add-mux>
</div>
